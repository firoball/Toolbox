<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Toolbox: state.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.9 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>state.h File Reference</h1>Include file for state manager.  
<a href="#_details">More...</a>
<p>
<code>#include &quot;<a class="el" href="list_8h.html">..\list\list.h</a>&quot;</code><br>
<code>#include &quot;state.c&quot;</code><br>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_s_t_a_t_e___t_r_a_n.html">STATE_TRAN</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Definition of a state transition.  <a href="struct_s_t_a_t_e___t_r_a_n.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_s_t_a_t_e___a_c_t_i_o_n.html">STATE_ACTION</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Definition of a state action.  <a href="struct_s_t_a_t_e___a_c_t_i_o_n.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_s_t_a_t_e_m_g_r.html">STATEMGR</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Definition of a state machine.  <a href="struct_s_t_a_t_e_m_g_r.html#_details">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="695dd637b37252af2a517ba8bae8d2c4"></a><!-- doxytag: member="state.h::STATE_ACTIVE" ref="695dd637b37252af2a517ba8bae8d2c4" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="state_8h.html#695dd637b37252af2a517ba8bae8d2c4">STATE_ACTIVE</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This define can be evaluated to check if this module is included and active. <br></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="struct_s_t_a_t_e_m_g_r.html">STATEMGR</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="state_8h.html#703724e72957170f306b644d9bae177b">STATEMGR_create</a> (var vState)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Creates new State Manager.  <a href="#703724e72957170f306b644d9bae177b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="state_8h.html#839bae1950dc188769ec5791d449c566">STATEMGR_remove</a> (<a class="el" href="struct_s_t_a_t_e_m_g_r.html">STATEMGR</a> *psState)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Removes a State Machine.  <a href="#839bae1950dc188769ec5791d449c566"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="state_8h.html#833f5320f19b85024c46f806ccd70c0b">STATEMGR_addTransition</a> (<a class="el" href="struct_s_t_a_t_e_m_g_r.html">STATEMGR</a> *psState, var vCurState, var vNewState, void *pfCheck, void *pfSwitch)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Add new transition to State Machine.  <a href="#833f5320f19b85024c46f806ccd70c0b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="state_8h.html#72a14383adf83e6893a3f5a4cca88131">STATEMGR_addState</a> (<a class="el" href="struct_s_t_a_t_e_m_g_r.html">STATEMGR</a> *psState, var vCurState, void *pfAction, void *pfInit, void *pfDeinit)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Add new state to State Machine.  <a href="#72a14383adf83e6893a3f5a4cca88131"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="state_8h.html#b420c531bd0c72348b153df19f7fd5b3">STATEMGR_execute</a> (<a class="el" href="struct_s_t_a_t_e_m_g_r.html">STATEMGR</a> *psState)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Execute cyclical actions and transition checks for State Machine.  <a href="#b420c531bd0c72348b153df19f7fd5b3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">var&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="state_8h.html#849b65f2fc571677f2fda9b3d4f00254">STATEMGR_getState</a> (<a class="el" href="struct_s_t_a_t_e_m_g_r.html">STATEMGR</a> *psState)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get currently active state.  <a href="#849b65f2fc571677f2fda9b3d4f00254"></a><br></td></tr>
</table>
<hr><h2>Detailed Description</h2>
Include file for state manager. 
<p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="72a14383adf83e6893a3f5a4cca88131"></a><!-- doxytag: member="state.h::STATEMGR_addState" ref="72a14383adf83e6893a3f5a4cca88131" args="(STATEMGR *psState, var vCurState, void *pfAction, void *pfInit, void *pfDeinit)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void STATEMGR_addState           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_s_t_a_t_e_m_g_r.html">STATEMGR</a> *&nbsp;</td>
          <td class="paramname"> <em>psState</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">var&nbsp;</td>
          <td class="paramname"> <em>vCurState</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>pfAction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>pfInit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>pfDeinit</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Add new state to State Machine. 
<p>
A new state with init, deinit and cyclical callback functions is added. States can only be added, but not removed. Each state may only be added once. If a state is added multiple times, only the first definition will be recognized. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>psState</em>&nbsp;</td><td>Pointer to affected <a class="el" href="struct_s_t_a_t_e_m_g_r.html" title="Definition of a state machine.">STATEMGR</a> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>vCurState</em>&nbsp;</td><td>Current state </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pfAction</em>&nbsp;</td><td>Pointer to cyclical action callback function (type void func(void)) [optional: may be set to NULL] </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pfInit</em>&nbsp;</td><td>Pointer to initialization function (called on state entry - type void func(void)) [optional: may be set to NULL] </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pfDeinit</em>&nbsp;</td><td>Pointer to deinitialization function (called on state exit - type void func(void)) [optional: may be set to NULL] </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="833f5320f19b85024c46f806ccd70c0b"></a><!-- doxytag: member="state.h::STATEMGR_addTransition" ref="833f5320f19b85024c46f806ccd70c0b" args="(STATEMGR *psState, var vCurState, var vNewState, void *pfCheck, void *pfSwitch)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void STATEMGR_addTransition           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_s_t_a_t_e_m_g_r.html">STATEMGR</a> *&nbsp;</td>
          <td class="paramname"> <em>psState</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">var&nbsp;</td>
          <td class="paramname"> <em>vCurState</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">var&nbsp;</td>
          <td class="paramname"> <em>vNewState</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>pfCheck</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>pfSwitch</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Add new transition to State Machine. 
<p>
A new state transition with check condition callback and tranistion action callback is added. Transitions can only be added, but not removed. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>psState</em>&nbsp;</td><td>Pointer to affected <a class="el" href="struct_s_t_a_t_e_m_g_r.html" title="Definition of a state machine.">STATEMGR</a> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>vCurState</em>&nbsp;</td><td>Current state </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>vNewState</em>&nbsp;</td><td>Next state </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pfCheck</em>&nbsp;</td><td>Check condition callback function (type: var func(void) - return value 1 = true, 0 = false) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pfSwitch</em>&nbsp;</td><td>Pointer to transition action callback function (type void func(void)) [optional: may be set to NULL] </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="703724e72957170f306b644d9bae177b"></a><!-- doxytag: member="state.h::STATEMGR_create" ref="703724e72957170f306b644d9bae177b" args="(var vState)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_s_t_a_t_e_m_g_r.html">STATEMGR</a>* STATEMGR_create           </td>
          <td>(</td>
          <td class="paramtype">var&nbsp;</td>
          <td class="paramname"> <em>vState</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Creates new State Manager. 
<p>
Use STATEMGR_addTransition and STATEMGR_addAction to configure state manager. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>vState</em>&nbsp;</td><td>initial state </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Pointer to <a class="el" href="struct_s_t_a_t_e_m_g_r.html" title="Definition of a state machine.">STATEMGR</a> structure </dd></dl>

</div>
</div><p>
<a class="anchor" name="b420c531bd0c72348b153df19f7fd5b3"></a><!-- doxytag: member="state.h::STATEMGR_execute" ref="b420c531bd0c72348b153df19f7fd5b3" args="(STATEMGR *psState)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void STATEMGR_execute           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_s_t_a_t_e_m_g_r.html">STATEMGR</a> *&nbsp;</td>
          <td class="paramname"> <em>psState</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Execute cyclical actions and transition checks for State Machine. 
<p>
Must be called cyclically. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>psState</em>&nbsp;</td><td>Pointer to affected <a class="el" href="struct_s_t_a_t_e_m_g_r.html" title="Definition of a state machine.">STATEMGR</a> </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="849b65f2fc571677f2fda9b3d4f00254"></a><!-- doxytag: member="state.h::STATEMGR_getState" ref="849b65f2fc571677f2fda9b3d4f00254" args="(STATEMGR *psState)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">var STATEMGR_getState           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_s_t_a_t_e_m_g_r.html">STATEMGR</a> *&nbsp;</td>
          <td class="paramname"> <em>psState</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get currently active state. 
<p>
Should only be used for stopping loop functions and never for if checks. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>psState</em>&nbsp;</td><td>Pointer to affected <a class="el" href="struct_s_t_a_t_e_m_g_r.html" title="Definition of a state machine.">STATEMGR</a> </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Current state </dd></dl>

</div>
</div><p>
<a class="anchor" name="839bae1950dc188769ec5791d449c566"></a><!-- doxytag: member="state.h::STATEMGR_remove" ref="839bae1950dc188769ec5791d449c566" args="(STATEMGR *psState)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void STATEMGR_remove           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_s_t_a_t_e_m_g_r.html">STATEMGR</a> *&nbsp;</td>
          <td class="paramname"> <em>psState</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Removes a State Machine. 
<p>
Frees all memory previously allocated by the given state machine. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>psState</em>&nbsp;</td><td>Pointer to affected <a class="el" href="struct_s_t_a_t_e_m_g_r.html" title="Definition of a state machine.">STATEMGR</a> </td></tr>
  </table>
</dl>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Sat Jun 19 16:48:31 2010 for Toolbox by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.9 </small></address>
</body>
</html>
